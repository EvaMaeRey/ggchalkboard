---
output: github_document
---

<!-- toc: TRUE -->
<!-- toc_depth: 2 -->

<!-- README.md is generated from README.Rmd. Please edit that file -->

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end --> 

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

library(tidyverse)
```


# {ggchalkboard} 

ggchalkboard is a teaching package. It shows examples of how to extend ggplot2 themes w/ version 3.5.1.9000, which has some significant updates!

I do not consider myself very gifted when it comes to thematic choices in ggplot2.  But thematic choices can be 'make or break' when it comes to audience.  I do like chalkboards and think I can do a reasonable job mimicking their look and that more gifted themers might learn from these efforts.

I welcome feedback on the thematic or coding choices.

```{r}
library(ggplot2)
```

<!-- But let's not get ahead of ourselves.  Let's start creating by creating theme_chalkboard, which is likely to be familiar as it is a ggplot2 extension entry point.  The topic gets first billing in the ggplot2 extension chapter in ggplot2 and is covered in some detail there, so we won't  https://ggplot2-book.org/extensions  -->

We'll be modifying a theme, since we don't want to start from scratch -- a theme contains a lot of decisions; to get a sense of that we can look at the length of the list object returned by `ggplot2::theme_gray()`

```{r}
ggplot2::theme_gray() |> length()
```

So let's get to writing our theme, `theme_chalkboard`.  

```{r theme_chalkboard}
theme_classic <- ggplot2::theme_classic

theme_chalkboard <- function(paper = "darkseagreen4",
                             ink = alpha("lightyellow", .6),
                             accent = alpha("orange", 1),
                             base_size = 20,
                             base_theme = theme_classic,
                      ...){
  
  base_theme(paper = paper, ink = ink, base_size = base_size, ...) + 
    theme(geom = element_geom(accent = accent))
  
}
```

```{r, out.width="49%", fig.show='hold'}
library(tidyverse)
ggplot(cars) + 
  aes(speed, dist) + 
  geom_point() + 
  geom_smooth()

last_plot() + 
  theme_chalkboard()
```

```{r theme_blackboard}
theme_blackboard <- function(paper = "grey27",
                             ink = alpha("whitesmoke", .6),
                             accent = alpha("palevioletred3", .8),
                             base_size = 20,
                             inherited = ggplot2::theme_classic,
                      ...){
  
  inherited(paper = paper, ink = ink, base_size = base_size, ...) + 
    theme(geom = element_geom(accent = accent))
  
}
```

```{r}
last_plot() + 
  theme_blackboard()
```



```{r theme_slateboard}
theme_slateboard <- function(paper = "lightskyblue4",
                             ink = alpha("whitesmoke", .6),
                             accent = alpha("palevioletred3", .8),
                             base_size = 20,
                             inherited = ggplot2::theme_classic,
                      ...){
  
  inherited(paper = paper, ink = ink, base_size = base_size, ...) + 
    theme(geom = element_geom(accent = accent))
  
}
```


```{r}
last_plot() +
  theme_slateboard()
```



```{r theme_whiteboard}
theme_whiteboard <- function(paper = "white",
                             ink = alpha("darkslateblue", .9),
                             accent = alpha("darkred", .9),
                             base_size = 20,
                             inherited = ggplot2::theme_classic,
                      ...){
  
  inherited(paper = paper, ink = ink, base_size = base_size, ...) + 
    theme(geom = element_geom(accent = accent))
  
}
```


```{r}
last_plot() +
  theme_whiteboard()
```

```{r theme_glassboard}
theme_glassboard <- function(paper = alpha("white", 0),
                             ink = alpha("midnightblue", .9),
                             accent = alpha("darkred", .9),
                             base_size = 20,
                             inherited = ggplot2::theme_classic,
                      ...){
  
  inherited(paper = paper, ink = ink, base_size = base_size, ...) + 
    theme(geom = element_geom(accent = accent))
  
}
```


```{r}
last_plot() +
  theme_glassboard()
```






Further coordination can be done when it comes to scales:

```{r}
scale_size_chalkboard <- function(...){
  
  scale_size(range = c(2, 9), ...)
  
}

ggplot(data = cars) + 
  aes(x = speed, y = dist, size = dist) + 
  geom_point() + 
  theme_chalkboard() + 
  scale_size_chalkboard()
```

Color and fill scale are probably of greater interest, I know. Something to come back to. 

# Part II. Packaging and documentation  ðŸš§

## Phase 1. Minimal working package

### Bit A. Created package archetecture, running `devtools::create(".")` in interactive session. âœ…


```{r, eval = F}
devtools::create(".")
```

### Bit B. Added roxygen skeleton? ðŸš§ 

Use a roxygen skeleton for auto documentation and making sure proposed functions are *exported*.  Generally, early on, I don't do much (anything) in terms of filling in the skeleton for documentation, because things may change.

### Bit C. Managed dependencies ? âœ…

Package dependencies managed, i.e. `depend::function()` in proposed functions and declared in the DESCRIPTION

```{r, eval = F}
usethis::use_package("ggplot2")
```


### Bit D. Moved functions R folder? âœ…

Use new {readme2pkg} function to do this from readme...

```{r}
knitrExtra::chunk_names_get()
library(tidyverse)
knitrExtra:::chunk_to_r("theme_chalkboard")
knitrExtra:::chunk_to_r("theme_blackboard")
knitrExtra:::chunk_to_r("theme_whiteboard")
knitrExtra:::chunk_to_r("theme_slateboard")
knitrExtra:::chunk_to_r("theme_glassboard")
```

### Bit E. Run `devtools::check()` and addressed errors. ðŸš§ âœ…

```{r, eval = F}
devtools::check(pkg = ".")
```

### Bit F. Build package ðŸš§ âœ…

```{r, eval = F}
devtools::build()
```


### Bit G. Write traditional README that uses built package (also serves as a test of build. âœ… 

The goal of the {ggchalkboard} package is to make it easy to theme ggplots like chalkboards

Install package with:

```
remotes::install_github("EvaMaeRey/ggchalkboard")
```

Once functions are exported you can remove go to two colons, and when things are are really finalized, then go without colons (and rearrange your readme...)

```{r, eval = F}
library(ggchalkboard)  
library(ggplot2)

ggplot(data = cars) + 
  aes(x = speed) + 
  geom_histogram() + 
  ggchalkboard:::theme_chalkboard()

ggchalkboard:::geoms_chalk_on()

last_plot()


ggchalkboard:::geoms_chalk_off()

last_plot()
```




### Bit H. Chosen a license? âœ…


```{r, eval = F}
usethis::use_mit_license()
```

### Bit I. Add lifecycle badge (experimental) âœ…

```{r, eval = F}
usethis::use_lifecycle_badge("experimental")
```


## Phase 2: Listen & iterate ðŸš§ 

Try to get feedback from experts on API, implementation, default decisions.  Is there already work that solves this problem? 


## Phase 3: Let things settle

### Bit A. Settle on examples.  Put them in the roxygen skeleton and readme. ðŸš§ 

### Bit B. Written formal tests of functions and save to test that folders ðŸš§ 


That would look like this...

```{r test_calc_times_two_works, eval = F}
library(testthat)

test_that("calc times 2 works", {
  expect_equal(times_two(4), 8)
  expect_equal(times_two(5), 10)
  
})
```


```{r, eval = F}
knitrExtra:::chunk_to_tests_testthat("test_calc_times_two_works")
```


### Bit C. Added a description and author information in the DESCRIPTION file ðŸš§ 

### Bit D. Addressed *all* notes, warnings and errors. ðŸš§ 

## Phase 4. Promote to wider audience...

### Bit A. Package website built?  âœ…

```{r, eval = F}
usethis::use_pkgdown()
pkgdown::build_site()

```


### Bit B. Package website deployed? ðŸš§ âœ…

## Phase 5: Harden/commit

### Submit to CRAN/RUniverse? ðŸš§ 

# Appendix: Reports, Environment

## Edit Description file

```{r, eval = T}
readLines("DESCRIPTION")
```

## Environment

Here I just want to print the packages and the versions

```{r}
all <- sessionInfo() |> print() |> capture.output()
all[11:20]
```

## `devtools::check()` report

```{r, error = T, results="hide", warning=F, eval = F}
devtools::check(pkg = ".")
```
